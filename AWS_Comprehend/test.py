#!/usr/bin/env python
import plac
from bs4 import BeautifulSoup
from urllib.request import Request, urlopen
import re

url_prefix = "http://www.webgenie.com/AWS_Comprehend/"
htmls = [
"00015462339",
"00032061272",
"00052039537",
"00060498312",
"00080148051",
"00086763222",
"00095004003",
"00095917573",
"00096681585",
"00111418975",
"00113149959",
"00119710833",
"00124647041",
"00127612427",
"00135227142",
"00137446909",
"00152932837",
"00154155459",
"00169188202",
"00175991890",
"00177768613",
"00179384317",
"00181231049",
"00220639595",
"00221638974",
"00231530376",
"00236277888",
"00239733539",
"00270544679",
"00272039558",
"00272222308",
"00300391293",
"00304964973",
"00321681644",
"00323622883",
"00333659498",
"00361046066",
"00363404363",
"00386974647",
"00478344350",
"00492374820",
"00495169593",
"00498636386",
"00499443809",
"00501703709",
"00546900957",
"00564047282",
"00599470509",
"00602002968",
"00602841221",
"00654854417",
"00660342025",
"00663349703",
"00686846622",
"00701264674",
"00703345895",
"00717653678",
"00742696528",
"00790701776",
"00800612183",
"00807810164",
"00815470343",
"00838939269",
"00866508736",
"00869952347",
"00897703661",
"00915330347",
"00918704448",
"00919335821",
"00928234181",
"00935589979",
"00941588511",
"00952245104",
"00970560861",
"00974332337",
"01030680395",
"01046127469",
"01132602005",
"01144692301",
"01145924349",
"01153300420",
"01168905402",
"01183768798",
"01198984624",
"01211982907",
"01217139761",
"01243299927",
"01265977141",
"01301024957",
"01311978019",
"01335161411",
"01351227491",
"01352096118",
"01361566083",
"01363993023",
"01381005522",
"01381488646",
"01404294513",
"01405997020",
"01427037824",
"01436631625",
"01436762127",
"01469180362",
"01470889326",
"01482360176",
"01493700173",
"01518349052",
"01546876011",
"01554734775",
"01554791140",
"01573470726",
"01594204419",
"01601353863",
"01620591247",
"01621366421",
"01642167503",
"01667529132",
"01726548081",
"01738529962",
"01744059147",
"01752358881",
"01769779801",
"01790001813",
"01790031606",
"01805783587",
"01822883971",
"01879737349",
"01900411746",
"01905972681",
"01911342430",
"01913623124",
"01923802043",
"01929550005",
"01932699187",
"01940793544",
"01941651529",
"01946817660",
"01956491046",
"01963032408",
"01975361752",
"01977373545",
"01979537515",
"02010240871",
"02015381358",
"02053400872",
"02060983244",
"02074183101",
"02081309640",
"02087613335",
"02156122541",
"02156941467",
"02236756486",
"02250416697",
"02252818046",
"02287372449",
"02299108556",
"02299546002",
"02308016546",
"02325937047",
"02357846781",
"02379578940",
"02387375654",
"02389310677",
"02424200301",
"02427111506",
"02441851900",
"02445574658",
"02479068026",
"02486824493",
"02531624097",
"02537815146",
"02559403845",
"02571865294",
"02588919036",
"02603545937",
"02623890504",
"02624205901",
"02632195189",
"02636174615",
"02638422047",
"02644689504",
"02676933035",
"02678017542",
"02684063126",
"02695077314",
"02709274987",
"02716605792",
"02722734432",
"02733762105",
"02739306747",
"02752177918",
"02752851966",
"02775051727",
"02781102080",
"02788720641",
"02811251966",
"02826765278",
"02827611032",
"02833502635",
"02836675570",
"02838794512",
"02850195675",
"02854394200",
"02870329380",
"02872710813",
"02877859965",
"02903711282",
"02930583336",
"02955580129",
"02958816227",
"02965898396",
"02990611992",
"02992855770",
"03011395243",
"03018079690",
"03068102706",
"03070415300",
"03124663610",
"03143331917",
"03150150951",
"03151532081",
"03160429758",
"03193786917",
"03209941393",
"03213953591",
"03250866557",
"03275388877",
"03280469366",
"03317258462",
"03320498205",
"03344014971",
"03417707507",
"03424021519",
"03433735235",
"03437902570",
"03439208454",
"03450973311",
"03465998525",
"03478365617",
"03480459939",
"03488568406",
"03507187532",
"03539011071",
"03564837096",
"03574189437",
"03583931402",
"03584181496",
"03594335410",
"03594566670",
"03600682215",
"03616493667",
"03620719068",
"03626044867",
"03639473644",
"03655098308",
"03665185717",
"03672547084",
"03705800010",
"03724875853",
"03732992401",
"03743922497",
"03744330347",
"03764153857",
"03774264578",
"03776394922",
"03825192776",
"03880808692",
"03953843930",
"03976730871",
"03997595227",
"04051773582",
"04088918564",
"04101308805",
"04112518820",
"04123104798",
"04133280240",
"04138474160",
"04142277751",
"04157025163",
"04159630232",
"04191737590",
"04203489005",
"04246149941",
"04253673708",
"04253937630",
"04257947917",
"04278651300",
"04297305161",
"04316496995",
"04317550637",
"04356033297",
"04366042689",
"04374605070",
"04399854753",
"04424827768",
"04426982415",
"04435437504",
"04484363205",
"04500139145",
"04516630298",
"04533835509",
"04558164353",
"04562988095",
"04563828517",
"04567586123",
"04575231511",
"04602314054",
"04652218567",
"04668321603",
"04670335321",
"04693592242",
"04709978784",
"04714439443",
"04788218279",
"04789710948",
"04804481109",
"04811885472",
"04812017798",
"04845632795",
"04870325448",
"04881122320",
"04882131164",
"04896065957",
"04897965420",
"04910901893",
"04922596651",
"04927413194",
"04928081637",
"04938022175",
"04958754288",
"04961506248",
"04962136872",
"04970819413",
"04981186749",
"04995598947",
"05022910732",
"05023902503",
"05033953142",
"05039432969",
"05043043730",
"05079318866",
"05087470728",
"05097920896",
"05098898998",
"05133584470",
"05149432489",
"05175438684",
"05176932648",
"05249711150",
"05250354471",
"05255420283",
"05269044422",
"05271411806",
"05293024743",
"05311901877",
"05325001080",
"05355719689",
"05365523721",
"05365936804",
"05370823325",
"05381092585",
"05408530705",
"05409096503",
"05438445224",
"05463816673",
"05482765618",
"05501141233",
"05516353290",
"05525193728",
"05530429167",
"05555838679",
"05588001739",
"05596615453",
"05597780669",
"05598612226",
"05629233690",
"05639735399",
"05663973079",
"05717989114",
"05722624850",
"05734715527",
"05741970762",
"05769745732",
"05770281348",
"05774192555",
"05777994457",
"05790701208",
"05795569013",
"05846906471",
"05870986580",
"05886561351",
"05889993944",
"05896017128",
"05899545079",
"05917596462",
"05918395841",
"05942774430",
"05977552983",
"05989170500",
"06002116810",
"06058251526",
"06071739724",
"06083257977",
"06103371966",
"06113151265",
"06121713646",
"06128733069",
"06143008103",
"06168089709",
"06179763699",
"06188379350",
"06214778887",
"06216958380",
"06217539889",
"06227294143",
"06237092165",
"06255528462",
"06268581839",
"06288015806",
"06294211509",
"06310613120",
"06321365277",
"06323113432",
"06362299313",
"06382153297",
"06413784069",
"06427616762",
"06449172042",
"06472035325",
"06473765412",
"06475275575",
"06478698030",
"06487269347",
"06516905366",
"06519254793",
"06540138393",
"06543700213",
"06556625093",
"06567182859",
"06567536736",
"06568233866",
"06585769348",
"06594560580",
"06624165190",
"06644099872",
"06657339557",
"06661983857",
"06662094004",
"06663677718",
"06668597070",
"06688612168",
"06691896861",
"06729496166",
"06733770131",
"06734523413",
"06745749711",
"06776177275",
"06807634739",
"06813932761",
"06845372540",
"06852185449",
"06855341993",
"06865996944",
"06866823696",
"06889117121",
"06889277649",
"06894465430",
"06901331766",
"06915470558",
"06926100995",
"06939550265",
"06948992664",
"06953722974",
"06967660777",
"06976332519",
"06976426820",
"06985367157",
"06987610480",
"06995153696",
"06997002000",
"07009518077",
"07015848407",
"07028239162",
"07034757927",
"07044719712",
"07060533471",
"07122322165",
"07123788954",
"07129014195",
"07135885835",
"07142492706",
"07175709110",
"07176277769",
"07197974163",
"07198604143",
"07207564661",
"07210325743",
"07211353922",
"07213229661",
"07233598993",
"07234172049",
"07247238128",
"07294759576",
"07307285116",
"07318375670",
"07352564087",
"07377000148",
"07406051487",
"07412653879",
"07431108049",
"07437132596",
"07454765303",
"07458405989",
"07499911700",
"07507076034",
"07516460287",
"07532243790",
"07535554732",
"07545334006",
"07545422243",
"07553330334",
"07571032692",
"07580141638",
"07581661191",
"07590393792",
"07615105655",
"07623529917",
"07628449221",
"07645133597",
"07697990984",
"07748034588",
"07749118839",
"07749165898",
"07756006690",
"07788544048",
"07790488449",
"07823709141",
"07824004718",
"07824087261",
"07837512586",
"07862877030",
"07865650979",
"07874806341",
"07890915813",
"07916030041",
"07918308117",
"07923340545",
"07927124762",
"07933646046",
"07938174595",
"08016464158",
"08077792633",
"08083561095",
"08092986743",
"08125369870",
"08148304299",
"08160112858",
"08160140900",
"08164636001",
"08210183354",
"08220646663",
"08221216952",
"08234041869",
"08234831423",
"08241389871",
"08268326999",
"08288947387",
"08298656204",
"08319896008",
"08328092827",
"08334925873",
"08338806799",
"08408276893",
"08464251895",
"08483031678",
"08497200738",
"08504692188",
"08549479542",
"08551984744",
"08568321473",
"08573333248",
"08622688652",
"08631951588",
"08636305367",
"08720250292",
"08768466739",
"08769683268",
"08771894914",
"08777856530",
"08822518366",
"08830106997",
"08841894765",
"08858554216",
"08859054981",
"08872384349",
"08872593492",
"08877915626",
"08879466470",
"08886219334",
"08890018276",
"08894396117",
"08955213509",
"08956334448",
"08983585521",
"08997655552",
"09003514803",
"09020886272",
"09030429373",
"09044303619",
"09063623640",
"09078205419",
"09096078193",
"09130444517",
"09148856995",
"09166269203",
"09176924932",
"09197753651",
"09202877188",
"09210689296",
"09217237607",
"09250308527",
"09255975909",
"09289205206",
"09291227341",
"09307112971",
"09369294890",
"09404191310",
"09428655075",
"09463840235",
"09474775460",
"09481925734",
"09489891978",
"09490175604",
"09503131205",
"09514825629",
"09519026663",
"09576697172",
"09607740063",
"09609001180",
"09609293588",
"09611605601",
"09618868954",
"09619289587",
"09621374521",
"09622655674",
"09627971790",
"09637732760",
"09646324807",
"09647540254",
"09658046339",
"09658210045",
"09662160112",
"09662959093",
"09697254004",
"09709936403",
"09713621732",
"09742317938",
"09789510372",
"09805552424",
"09825623796",
"09867144599",
"09867965704",
"09878379524",
"09887999381",
"09888985658",
"09919144348",
"09926488936",
"09932886737",
"09950587258",
"09974040018",
"09975997425",
"09979889849",
"09982284886",
"10061545859",
"10217006596",
"10224288471",
"10247120573",
"10638733341",
"10683190388",
"10719285688",
"10825157540",
"10895414065",
"11009257652",
"11029922237",
"11207356201",
"11330520971",
"11363795203",
"11433183913",
"11566758320",
"11835018060",
"12209334681",
"12482319353",
"12716079513",
"12764484889",
"12838461829",
"12880844051",
"13241281736",
"13496636690",
"13516092656",
"13532042554",
"13553690856",
"13634420888",
"13942654807",
"14178188777",
"14569270175",
"14619983460",
"14713860409",
"14781233852",
"14797970123",
"14958445772",
"15177235519",
"15204047583",
"15389744577",
"15614715612",
"15630279252",
"15697639630",
"15706076399",
"15931262323",
"15983440596",
"16085941558",
"16119246767",
"16195379747",
"16329751113",
"16419478786",
"16965233071",
"17158592662",
"17187632505",
"17235756704",
"17270082240",
"17368956924",
"17438729946",
"17599610754",
"17869369085",
"18065167294",
"18275652024",
"18293667189",
"18463613095",
"18672670645",
"18766484942",
"18767681682",
"18809205988",
"18858571987",
"19076500295",
"19176201683",
"19417423224",
"19450434746",
"1.txt",
"20091589925",
"20092917997",
"20251709271",
"20268946778",
"20317329115",
"20352596331",
"20366124018",
"20393494578",
"20460852995",
"20575805284",
"20644435226",
"20772825218",
"20783561412",
"20854842682",
"20937941323",
"21026966601",
"21178188353",
"21337760983",
"21515539819",
"21519935525",
"21554072796",
"21793932621",
"22300670386",
"22526015026",
"22928785901",
"23111438542",
"23212532190",
"23320747079",
"23524838076",
"24157147971",
"24175740990",
"24439109214",
"24575122809",
"24591226498",
"24672212271",
"24833048343",
"25049057749",
"25183308939",
"25620178846",
"25634482592",
"25813368750",
"25859442065",
"25928317762",
"25984016286",
"26010883963",
"26408247904",
"26444811539",
"26760507360",
"27276796398",
"27378063970",
"27393712903",
"27420064675",
"27457675790",
"27472311092",
"27762426463",
"27895055044",
"27967314633",
"28347146301",
"28400439545",
"28450044676",
"28502366362",
"28743854724",
"28913437860",
"28937768230",
"29181118431",
"29387771490",
"29429185609",
"29515181730",
"29583129832",
"29782042453",
"29886782830",
"29962938723",
"30146126494",
"30228717563",
"30229495200",
"30369039687",
"30502633725",
"30815230822",
"31168272836",
"31369143076",
"31579468478",
"31693033960",
"31850442577",
"32078470665",
"32104228532",
"32183846942",
"32294042942",
"32305354891",
"32374679836",
"32453901679",
"32767221924",
"32830819178",
"32881992521",
"32901329570",
"33102630923",
"33381571434",
"33656151751",
"33699624259",
"33735626154",
"33951067670",
"33978625404",
"34022121944",
"34406592923",
"34443476282",
"34612354456",
"34659690362",
"34673021583",
"34693267586",
"34729990554",
"34744001821",
"34842126481",
"34992689687",
"34992783619",
"35064213661",
"35205755871",
"35211518699",
"35366914482",
"35673073347",
"35855935280",
"36384350517",
"36468756054",
"36605703259",
"36782159267",
"36884262938",
"37160477678",
"37175100928",
"37288591416",
"37502117385",
"37658338254",
"37701026742",
"38105795858",
"38160638972",
"38354927144",
"39001375047",
"39316969611",
"39513494087",
"39591642501",
"39764114982",
"40039549682",
"40041387645",
"40228016888",
"40306464185",
"40395920076",
"40859469575",
"40890706742",
"40973130876",
"41000188989",
"41299645036",
"41470880437",
"41884518228",
"42283539815",
"42444496927",
"42507736439",
"42510827702",
"42583811077",
"42695759728",
"42725105186",
"43005954394",
"43043349523",
"43054804869",
"43241591466",
"43476077410",
"43543618188",
"43661215005",
"43834952925",
"44027277369",
"44039108117",
"44056352368",
"44058186323",
"44110260468",
"44397324557",
"44636128779",
"44689482387",
"44699411848",
"44725396683",
"44803742975",
"44833350775",
"44904281399",
"45205804910",
"45376216320",
"45507977356",
"45715060551",
"45875127650",
"45939176677",
"46067802710",
"46357883931",
"46594417952",
"46651166872",
"46662708719",
"46689461402",
"47148468353",
"47628744153",
"47994555458",
"48102981886",
"48113764029",
"48250375449",
"48297685592",
"48593115426",
"48595937761",
"48649515409",
"48686383033",
"48752198692",
"48959387708",
"49090455715",
"49546303372",
"49621715471",
"49718272965",
"49886670684",
"49896195040",
"50042533158",
"50054131232",
"50362198681",
"50429302225",
"50537176265",
"50546398682",
"50645204349",
"50659727254",
"50693579279",
"51250216852",
"51268256352",
"51425838833",
"51754210496",
"51811966889",
"51995497408",
"52091551837",
"52180574022",
"52324844193",
"52951777258",
"52973734082",
"53086991142",
"53088891274",
"53126187708",
"53276157340",
"53351625764",
"53422024968",
"53496891841",
"53693560195",
"53808878438",
"53965018021",
"54023772204",
"54187538746",
"54466950448",
"54684857141",
"54796753195",
"54814599398",
"54881546727",
"54900730109",
"54902223773",
"54926937189",
"55154412546",
"55374767548",
"55434454832",
"55661751943",
"55718840440",
"55756925076",
"55851598153",
"55950148051",
"56287813229",
"56383139011",
"56545643185",
"56613645270",
"56637178739",
"56802878246",
"56847717608",
"56955941131",
"56986471659",
"57057252951",
"57087983343",
"57290542044",
"57638599008",
"57813342221",
"57896401386",
"58018554704",
"58155571226",
"58372749304",
"58666775007",
"58685851649",
"58913128078",
"59492862166",
"59810250851",
"60058367756",
"60124797948",
"60210046759",
"60257396155",
"60346930864",
"60745845741",
"60776182895",
"60811188135",
"60873780801",
"61000926599",
"61238817002",
"61326725437",
"61519324509",
"61529429275",
"61624635518",
"61803712029",
"61896149992",
"62075762733",
"62285175023",
"62289781519",
"62365619022",
"62428588841",
"62539714589",
"62818358580",
"62850080814",
"62876768214",
"62931896118",
"63109519158",
"63235321164",
"63382563202",
"63528357992",
"63776202946",
"63917929603",
"64014654928",
"64140311418",
"64449323723",
"64490626465",
"64729301432",
"64820684955",
"64984933455",
"65432544094",
"65517163857",
"65713542910",
"65755840135",
"65846405931",
"65855660304",
"65995483587",
"66351290994",
"66543674910",
"66674274707",
"66949506981",
"67002376515",
"67052616497",
"67307252437",
"67329837334",
"67443670427",
"67467520437",
"67484165168",
"67603159610",
"67895357316",
"67970682911",
"68079634252",
"68180140929",
"68209675149",
"68238915203",
"68240290172",
"68353100287",
"68381800545",
"68591725390",
"68599852649",
"69058571605",
"69129750798",
"69193463266",
"69281283296",
"69679518700",
"69768784679",
"69841899495",
"69916003976",
"69992924154",
"70396217761",
"70831098101",
"70839530289",
"70916369591",
"71268004073",
"71364682302",
"71514038121",
"71517697968",
"71762479011",
"71773119302",
"71857453225",
"71912309016",
"72252185822",
"72343404724",
"72367296964",
"72405586952",
"72453077507",
"72846387305",
"72892821381",
"72899611191",
"72915111274",
"73006072223",
"73118241688",
"73368617181",
"73386812522",
"73547458981",
"73680568701",
"73745238871",
"73890697874",
"73930816813",
"73958639099",
"74321054989",
"74405592255",
"74416917619",
"74734105520",
"74783853071",
"74917241237",
"75036420333",
"75148163365",
"75317835131",
"75337543183",
"75431827698",
"75469814226",
"75519678644",
"75577682323",
"75585493980",
"75620036935",
"75828048668",
"75874962227",
"75989386325",
"76263826324",
"76479677722",
"76502757820",
"76524869550",
"76549435970",
"76633912116",
"76817083059",
"76832679163",
"76860764678",
"77092853156",
"77140269206",
"77176119543",
"77280690043",
"77340217341",
"77446051955",
"77607583506",
"77693610350",
"77798260646",
"77849909435",
"77913169074",
"78022327538",
"78029840207",
"78093526573",
"78319299699",
"78524655347",
"78578281705",
"78623106816",
"78641611716",
"78650919087",
"78679303837",
"78690995807",
"78727593127",
"78888014286",
"78953166789",
"79089693242",
"79110242895",
"79147395517",
"79162687020",
"79270165064",
"79333635527",
"79593190372",
"79777818874",
"79968962475",
"80357593382",
"80881126481",
"80894365740",
"80929157184",
"81045194154",
"81100769495",
"81239844130",
"81500332838",
"81718521173",
"81749465295",
"81809742784",
"81827274686",
"81876461412",
"81931429087",
"82035668679",
"82153609218",
"82220687928",
"82335833869",
"82580609648",
"82888610100",
"83116164342",
"83269200733",
"83817597166",
"83856129055",
"83943384953",
"84008811161",
"84063229238",
"84439112848",
"84486259211",
"84705523617",
"85227805810",
"85460316383",
"85496614132",
"85512607512",
"85816141995",
"85964296140",
"86152530301",
"86293050652",
"86625686218",
"86837696047",
"86847251953",
"86920192766",
"87191024955",
"87555174279",
"87648636764",
"87664648670",
"87774740979",
"87918112982",
"88053434386",
"88330152782",
"88360900623",
"88526697869",
"88538073736",
"88594866235",
"88629947616",
"88666521385",
"88727986607",
"88740833145",
"88767320136",
"88899762558",
"89044133143",
"89331949496",
"89350644644",
"89356436381",
"89803690781",
"90559909637",
"90598612226",
"90674756850",
"90697660612",
"90984179190",
"90985313424",
"91019661282",
"91030294947",
"91091037752",
"91342369714",
"91616409488",
"91833122034",
"91861021351",
"91897763853",
"91989083525",
"92085936723",
"92575037952",
"92599567242",
"92662677420",
"92837842904",
"92931646852",
"93103512367",
"93322873843",
"94038328150",
"94077254535",
"94120026570",
"94483811866",
"94756660661",
"94815631909",
"95025313849",
"95113411712",
"95295623828",
"95322388633",
"95826363490",
"95878352937",
"96257750180",
"96352367154",
"96513107542",
"96515485325",
"96700427693",
"96780328034",
"97242059290",
"97337859701",
"97725034707",
"98090702511",
"98124746524",
"98226941776",
"98261413124",
"98510812438",
"98681924221",
"98768122241",
"98960175118",
"99010280267",
"99115615150",
"99216725040",
"99318921139",
"99585275746"
]


def get_soup_bs4(site):  # Unused
    """
    Gets the remote page contents using URLs. This function only gets the plain HTML. It does not execute
    the JavaScript on the pages. If the page is dynamically displayed using JavaScript, you must use a different
    method using Selenium (see 'def get_soup()' in 'chemistwarehouse.com.au.py')

    :param site: The URL of the site to scrape from.
    :return: soup: the page content
    """
    hdr = {'User-Agent': 'Mozilla/5.0'}
    req = Request(site, headers=hdr)
    soup = ""
    try:
        page = urlopen(req)
        soup = BeautifulSoup(page, features="html.parser")  # using page, "lxml" gives an error on WG server
    except (AttributeError, ValueError):
        pass
    return soup


def get_quarantine():
    file = "Classification/spams.txt"
    with open(file, "r") as f:
        filecontent = f.readlines()
    with open("sh.txt", "w") as f:
        for line in filecontent:
            m = re.search('Quarantine = (.*)', line)
            if m:
                found = m.group(1)
                f.writelines(f"cp {found} .\n")


def main():
    with open("Classification/spam_lines.txt", "w") as f:
        for urk in htmls:
            try:
                url = url_prefix + urk
                soup = get_soup_bs4(url)
                body = soup.find_all("body", {})
                body_text = body[0].get_text().replace("\n", " ").strip()
                t = ' '.join(body_text.split())
                t = t.split()
                t = [w for w in t if "=" not in w]
                t = " ".join(t)
                print(f"{urk}:{t}")
                f.writelines(f"{urk}\t{t}\n")
            # except (IndexError, UnboundLocalError):
            except Exception as e:
                print(e)


if __name__ == "__main__":
    plac.call(main)
    # get_quarantine()

